<!DOCTYPE html>

<!--

  Planetary Gears - Documentation/Demonstration Webpage

  Source repository (at time of writing):
  https://github.com/tommccracken/PlanetaryGears


  Copyright 2017 Thomas O. McCracken

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

-->


<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Planetary Gears (Epicyclic Gears) Library Project Demonstration and Documentation Page">
  <title>Planetary Gears - Demonstration/Documentation</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="styles/custom_styles.css">

</head>

<body>

  <nav class="navbar navbar-inverse navbar-static-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        <a class="navbar-brand" href="#">Planetary Gears</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="active">
            <a href="#">Home</a>
          </li>
          <li>
            <a href="#About">About</a>
          </li>
          <li>
            <a href="#Usage">Usage</a>
          </li>
          <li>
            <a href="#Theory">Theory</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div style="background-color: #97edcb; margin-top: -25px;">
    <div class="container">
      <p class="text-center"><br /><br />An experiment by <a href="http://tommccracken.net">Tom McCracken</a>.<br /><br /></p>
      <canvas id="SketchCanvas" width="0" height="0" style="margin: auto; display: block;">
      </canvas>
      <p><br></p>
      <button id="randomise" type="button" class="btn btn-primary" style="margin: auto; display: block;">Randomise</button>
      <p><br></p>
      <p class="text-center"><a href="https://github.com/tommccracken/PlanetaryGears">Link</a> to GitHub repository containing source, demonstration/documentation (this page) and license for use.<br /><br /></p>
    </div>
  </div>

  <div class="container">
    <h1 id="About">About</h1>
    <p>This project is aimed at developing a Javascript library to model simple <a href="https://en.wikipedia.org/wiki/Epicyclic_gearing">Planetary (Epicyclic) Gear Trains</a> for animation purposes. In particular the library supports modeling the positions
      and velocities of planetary gear trains comprising one inner "sun" gear, one outer "ring" gear and one or more central "planet" gears (within a carrier).</p>
    <p>The library, including this demonstration/documentation web page, is hosted on GitHub and licensed under the permissive open source Apache 2.0 License. The key project files, located within the GitHub repository, are as follows:</p>
    <ul>
      <li>
        <p>/lib/PlanetaryGearModel.js - This is the library file that is used to model the planetary gear train. This library makes use of some ECMA2015+ features including the "class" and "let" keywords.</p>
      </li>
      <li>
        <p>/dist/PlanetaryGearModel.ES5.min.js - This is a transpiled (ES5), and minified, version of the above mentioned library.</p>
      </li>
    </ul>
    This project demonstration/documentation web page is located within the repository /docs/ folder. In this demonstration, a planetary gear train is modeled and animated using an HTML5 canvas element.</p>
    <h1 id="Usage">Usage</h1>
    <h2>Instantiation</h2>
    <p>To create an instance of a planetary gear model within an application, the constructor can be called as follows.</p>
    <pre><code>var planetary_gear = new PlanetaryGear (size_input_mode,
                                        size_A,
                                        size_B,
                                        speed_input_mode,
                                        speed_A,
                                        speed_B,
                                        tooth_pitch,
                                        number_of_planets);</code></pre>
    <p>The following is an explanation of the constructor parameters:</p>
    <ul>
      <li>
        <p><strong>size_input_mode</strong> - An integer value of 1, 2 or 3.</p>
        <p>A value of 1 means that the sun and planet sizes will be input as size_A and size_B respectively and the ring size will be calculated.</p>
        <p>A value of 2 means that the sun and ring sizes will be input as size_A and size_B respectively and the planet size will be calculated.</p>
        <p>A value of 3 means that the planet and ring sizes will be input as size_A and size_B respectively and the sun size will be calculated.</p>
      </li>
      <li>
        <p><strong>size_A</strong> - The gear size (the number of gear teeth). An integer value.</p>
      </li>
      <li>
        <p><strong>size_B</strong> - The gear size (the number of gear teeth). An integer value.</p>
      </li>
      <li>
        <p><strong>speed_input_mode</strong> - An integer value of 1, 2 or 3.</p>
        <p>A value of 1 means that the sun and carrier speeds will be input as speed_A and speed_B respectively and the ring speed, and planet speed(s), will be calculated.</p>
        <p>A value of 2 means that the sun and ring speeds will be input as speed_A and speed_B respectively and the carrier speed, and planet speed(s), will be calculated.</p>
        <p>A value of 3 means that the carrier and ring speeds will be input as speed_A and speed_B respectively and the sun speed, and planet speed(s), will be calculated.</p>
      </li>
      <li>
        <p><strong>speed_A</strong> - The gear angular speed in rad/s.</p>
      </li>
      <li>
        <p><strong>speed_B</strong> - The gear angular speed in rad/s.</p>
      </li>
      <li>
        <p><strong>tooth_pitch</strong> - The gear tooth pitch in m.</p>
      </li>
      <li>
        <p><strong>number_of_planets</strong> - The quantity of planet gears. An integer value.</p>
      </li>
    </ul>
    <h2>Updating positions</h2>
    <p>The following method can be called to update the positions of the components within a planetary gear model.</p>
    <pre><code>planetary_gear.fixed_speed_update(elapsed_time);</code></pre>
    <p>This will update the positions of the components within the overall model based on the total time that has elapsed since the beginning of the simulation. The parameter "elapsed_time" needs to be passed to the method. This assumes that the modeled
      components travel at a fixed speed.</p>
    <h2>Animation</h2>
    <p>Whilst animation of planetary gear trains is not the primary purpose of this project, the demonstration/documentation web page files demonstrate how various model parameters can be accessed in order for an application to animate the planetary gear
      train.</p>
    <p>Note: This animation example does not accurately model gears using involute profiles; it only approximates the shape of a gear tooth with a simple trapezium profile.</p>
    <h1 id="Theory">Theory</h1>
    <p>The library uses the following equations to determine the unknown size and speed variables based on the known variables and the particular size and speed input modes that have been selected. The variables Ws, Wp, Wc and Wr represent the angular velocities of the sun gear, planet gear(s), carrier, and ring gear respectively and the variables Ns, Np and Nr represent the sizes (numbers of teeth) of
      the sun gear, planet gear(s) and ring gear respectively.</p>
    <h2>Size calculations</h2>
    <ul>
      <li>
        <p><strong>Nr = Ns + 2Np</strong> (Equation 1) - This is a geometric constraint based on the fact that the size of the ring gear must be equal to the size of the sun gear plus twice the size of the planet gear(s).</p>
      </li>
    </ul>
    <h2>Speed calculations</h2>
    <ul>
      <li>
        <p><strong>NsWs + NpWp - (Ns + Np)Wc = 0</strong> (Equation 2) - This is a velocity constraint that requires the tangential velocity between the sun gear and a planet gear, at the point of contact, to be equal.</p>
      </li>
      <li>
        <p><strong>NrWr - NpWp - (Nr - Np)Wc = 0</strong> (Equation 3) - This is a velocity constraint that requires the tangential velocity between the ring gear and a planet gear, at the point of contact, to be equal.</p>
      </li>
      <li>
        <p><strong>NsWs + NrWr = (Ns+Nr)Wc</strong> (Equation 4) - This can be derived from Equations 2 and 3 and relates the sizes of the sun and ring gears to the speeds of the sun gear, ring gear and planet carrier.</p>
      </li>
    </ul>
    <hr>
    <footer>
      <p>&copy; Copyright Thomas O. McCracken 2017</p>
    </footer>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="scripts/PlanetaryGearModel.ES5.min.js" type="text/javascript"></script>
  <script src="scripts/PlanetaryGearDemo.js" type="text/javascript"></script>

</body>

</html>
